<div class="card formulario-container">
  <div *ngIf="modoAlta === true">
    <!-- #region Formulario Alta -->
    <form [formGroup]="formAlta">
      <!-- #region Cantidad Maxima de Clientes -->
      <div class="form-group control-cantidad-maxima">
        <label>Cantidad maxima de comensales</label>
        <input
          class="form-control"
          type="number"
          formControlName="cantidadMaxima"
        />
        <span
          *ngIf="isValidField('cantidadMaxima')"
          class="form-text text-danger small-error"
        >
          {{ getFieldError("cantidadMaxima") }}
        </span>
      </div>
      <!-- #endregion Cantidad Maxima de Clientes -->

      <!-- #region Tipo -->
      <div class="form-group control-tipo">
        <label>Tipo de mesa</label>
        <select class="form-control" formControlName="tipo">
          <option value="" disabled selected>Seleccionar...</option>
          <option *ngFor="let item of tiposMesas" [value]="item">
            {{ item | capitalize }}
          </option>
        </select>
        <span
          *ngIf="isValidField('tipo')"
          class="form-text text-danger small-error"
        >
          {{ getFieldError("tipo") }}
        </span>
      </div>
      <!-- #endregion Tipo -->

      <!-- #region Foto -->
      <div class="form-group control-foto">
        <label>Foto</label>
        <div class="input-group" style="text-align: center">
          <button class="btn btn-primary" (click)="tomarFoto()">
            {{ fotoBlob === undefined ? "Tomar foto" : "Cambiar foto" }}
          </button>
          @if (fotoBlob) {
          <img [src]="fotoBlob" />
          }
        </div>
        <span
          *ngIf="isValidField('foto')"
          class="form-text text-danger small-error"
        >
          {{ getFieldError("foto") }}
        </span>
      </div>
      <!-- #endregion Foto -->

      <!-- #region Boton Alta -->
      <div class="form-group control-accion">
        <button
          class="btn btn-primary"
          [disabled]="procesando"
          (click)="accion()"
        >
          <div *ngIf="procesando">
            <div class="loader-container">
              <span class="loader"></span>
            </div>
          </div>

          <div *ngIf="!procesando">Realizar</div>
        </button>
      </div>
      <!-- #endregion Boton Alta -->

      <!-- #region Boton Cancelar -->
      <div class="form-group control-cancelar">
        <button
          class="btn btn-primary"
          [disabled]="procesando"
          (click)="handlerTerminado.emit()"
        >
          Cancelar
        </button>
      </div>
      <!-- #endregion Boton Cancelar -->
    </form>
    <!-- #endregion Formulario Alta -->
  </div>

  <div *ngIf="modoModificar === true && mesa !== undefined">
    <!-- #region Formulario Modificar -->
    <form [formGroup]="formModificar">
      <!-- #region Id -->
      <div class="form-group control-id">
        <label>Numero de mesa</label>
        <input
          class="form-control"
          type="number"
          readonly
          formControlName="id"
        />
      </div>
      <!-- #endregion Id -->

      <!-- #region Cantidad Maxima de Clientes -->
      <div class="form-group control-cantidad-maxima">
        <label>Cantidad de comensales</label>
        <input
          class="form-control"
          type="number"
          readonly
          formControlName="cantidadClientes"
        />
        <span
          *ngIf="isValidField('cantidadClientes')"
          class="form-text text-danger small-error"
        >
          {{ getFieldError("cantidadClientes") }}
        </span>
      </div>
      <!-- #endregion Cantidad Maxima de Clientes -->

      <!-- #region Cantidad Maxima de Clientes -->
      <div class="form-group control-cantidad-maxima">
        <label>Cantidad maxima de comensales</label>
        <input
          class="form-control"
          type="number"
          formControlName="cantidadMaxima"
        />
        <span
          *ngIf="isValidField('cantidadMaxima')"
          class="form-text text-danger small-error"
        >
          {{ getFieldError("cantidadMaxima") }}
        </span>
      </div>
      <!-- #endregion Cantidad Maxima de Clientes -->

      <!-- #region Tipo -->
      <div class="form-group control-tipo">
        <label>Tipo de mesa</label>
        <select class="form-control" formControlName="tipo">
          <option value="">Seleccionar</option>
          <option *ngFor="let item of tiposMesas" [value]="item">
            {{ item | capitalize }}
          </option>
        </select>
        <span
          *ngIf="isValidField('tipo')"
          class="form-text text-danger small-error"
        >
          {{ getFieldError("tipo") }}
        </span>
      </div>
      <!-- #endregion Tipo -->

      <!-- #region Foto -->
      <div class="form-group control-foto">
        <label>Foto</label>
        <div class="input-group" style="text-align: center">
          <button class="btn btn-primary" (click)="tomarFoto()">
            {{
              fotoBlob === undefined && mesa.foto === undefined
                ? "Tomar foto"
                : "Cambiar foto"
            }}
          </button>
          <img [src]="fotoBlob === undefined ? mesa.foto : fotoBlob" />
        </div>
        <span
          *ngIf="isValidField('foto')"
          class="form-text text-danger small-error"
        >
          {{ getFieldError("foto") }}
        </span>
      </div>
      <!-- #endregion Foto -->

      <!-- #region Boton Modificar -->
      <div class="form-group control-accion">
        <button
          class="btn btn-primary"
          [disabled]="procesando"
          (click)="accion()"
        >
          <div *ngIf="formModificar.invalid">
            <div class="alert hide alert-danger" role="alert">
              Completa todos los campos antes de continuar.
            </div>
          </div>
          <div *ngIf="procesando">
            <div class="loader-container">
              <span class="loader"></span>
            </div>
          </div>

          <div *ngIf="!procesando">Realizar</div>
        </button>
      </div>
      <!-- #endregion Boton Modificar -->

      <!-- #region Boton Cancelar -->
      <div class="form-group control-cancelar">
        <button
          class="btn btn-primary"
          [disabled]="procesando"
          (click)="handlerTerminado.emit()"
        >
          Cancelar
        </button>
      </div>
      <!-- #endregion Boton Cancelar -->
    </form>
    <!-- #endregion Formulario Modificar -->
  </div>

  <div *ngIf="modoBaja === true && mesa !== undefined">
    <!-- #region Formulario Baja -->
    <form [formGroup]="formBaja">
      <!-- #region Id -->
      <div class="form-group control-id">
        <label>Numero de mesa</label>
        <input
          class="form-control"
          type="number"
          readonly
          formControlName="id"
        />
      </div>
      <!-- #endregion Id -->

      <!-- #region Cantidad de Clientes -->
      <div class="form-group control-cantidad-clientes">
        <label>Cantidad de comensales</label>
        <input
          class="form-control"
          type="number"
          readonly
          formControlName="cantidadClientes"
        />
      </div>
      <!-- #endregion Cantidad Clientes -->

      <!-- #region Cantidad Maxima de Clientes -->
      <div class="form-group control-cantidad-maxima">
        <label>Cantidad maxima de comensales</label>
        <input
          class="form-control"
          type="number"
          readonly
          formControlName="cantidadMaxima"
        />
      </div>
      <!-- #endregion Cantidad Maxima de Clientes -->

      <!-- #region Tipo -->
      <div class="form-group control-tipo">
        <label>Tipo de mesa</label>
        <input
          class="form-control"
          type="text"
          readonly
          formControlName="tipo"
        />
      </div>
      <!-- #endregion Tipo -->

      <!-- #region Foto -->
      <div class="form-group control-foto">
        <label>Foto</label>
        <div style="text-align: center">
          <img class="img-baja" [src]="mesa.foto" />
        </div>
      </div>
      <!-- #endregion Foto -->

      <!-- #region Boton Baja -->
      <div class="form-group control-accion">
        <button
          class="btn btn-primary"
          [disabled]="procesando"
          (click)="accion()"
        >
          <div *ngIf="procesando">
            <div class="loader-container">
              <span class="loader"></span>
            </div>
          </div>

          <div *ngIf="!procesando">Realizar</div>
        </button>
      </div>
      <!-- #endregion Boton Baja -->

      <!-- #region Boton Cancelar -->
      <div class="form-group control-cancelar">
        <button
          class="btn btn-primary"
          [disabled]="procesando"
          (click)="handlerTerminado.emit()"
        >
          Cancelar
        </button>
      </div>
      <!-- #endregion Boton Cancelar -->
    </form>
    <!-- #endregion Formulario Baja -->
  </div>
</div>
